<main>
  <table class="mx-auto w-full" *ngIf="productService.products">
    <tr [ngClass]="{
      admin_table__header: authService.isAdminSig(),
      user_table__header: !authService.isAdminSig()
    }">
      <th>Изображение</th>
      <th>Код</th>
      <th>Артикул</th>
      <th>Наименование</th>
      <th>Производитель</th>
      <th>Количество</th>
      <th>Цена</th>
      <th></th>
    </tr>


    <tr stopPropagation *ngFor="let product of productService.products"
        (click)="modalService.openModal('Create product')"
        [ngClass]="{
      admin_table__body: authService.isAdminSig(),
      user_table__body: !authService.isAdminSig()
    }"
    >
      <td stopPropagation (click)="modalService.openModal('Image')">
        <!--        // TODO открытие изображения в модальном окне-->

        <img [src]="product.imageUrl" alt="{{product.title}}"
             class="mx-auto image-circle">
      </td>
      <td>{{ product.code }}</td>
      <td>{{ product.article | titlecase }}</td>
      <td>{{ product.title | titlecase }}</td>
      <td>{{ product.brand | titlecase }}</td>
      <td>{{ product.qty }}</td>
      <td>{{ product.price | uahToEur: 40 | currency: 'EUR ' }}</td>
      <td>
        <div *ngIf="authService.isAdminSig()">
          <button stopPropagation class="btn btn-orange mb-1"
                  (click)="modalService.openModal('Update', product)">
            update
          </button>
          <button stopPropagation class="btn btn-red" (click)="delete(product.id)">delete</button>
        </div>
      </td>
    </tr>
  </table>

  <ng-container *ngIf="modalService.isVisible | async">
    <app-modal [title]="modalService.titleSing()" [product]="modalService.productSign()">
      <app-product-form></app-product-form>
    </app-modal>
  </ng-container>

</main>

